<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>Esperanza Colombia Radio</title>
<link href="jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<meta name="viewport" content="user-scalable=no, initial-scale=0.75, maximum-scale=1,minimum-scale=0.75, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<!-- Esta referencia a phonegap.js permitirá disponer de sugerencias para el código, siempre y cuando el sitio actual se haya configurado como aplicación móvil. 
	 Para configurar el sitio como aplicación móvil, vaya a Sitio -> Aplicaciones móviles -> Configurar framework de aplicación... -->
<script src="/phonegap.js" type="text/javascript"></script>
<!-- script para obtener el height dle contenido-->
<script>
$(document).ready(sizeContent);

//Every resize of window
$(window).resize(sizeContent);

//Dynamically assign height
function sizeContent() {
    var newHeight = $("html").height() - $("#footer").height() + "px";
    $("#contentmod").css("height", newHeight);
}

</script>
<!-- script para controlar historial de navegación -->
<script>
$.mobile.pushStateEnabled = false;
$.mobile.hashListeningEnabled = false;

// Function copied from jquery.mobile-1.3.0-beta.1.js #2066-2132
// Modifications are marked with "[MODIFICATION]"
$.mobile.Navigator.prototype.go = function( url, data, noEvents ) {
    // [MODIFICATION: Line copied from #1994]
    var path = $.mobile.path;
    // [/MODIFICATION]

    var state, href, hash, popstateEvent,
        isPopStateEvent = $.event.special.navigate.isPushStateEnabled();

    // Get the url as it would look squashed on to the current resolution url
    href = path.squash( url );

    // sort out what the hash sould be from the url
    hash = this.hash( url, href );

    // Here we prevent the next hash change or popstate event from doing any
    // history management. In the case of hashchange we don't swallow it
    // if there will be no hashchange fired (since that won't reset the value)
    // and will swallow the following hashchange
    if( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {
        this.preventNextHashChange = noEvents;
    }

    // IMPORTANT in the case where popstate is supported the event will be triggered
    //      directly, stopping further execution - ie, interupting the flow of this
    //      method call to fire bindings at this expression. Below the navigate method
    //      there is a binding to catch this event and stop its propagation.
    //
    //      We then trigger a new popstate event on the window with a null state
    //      so that the navigate events can conclude their work properly
    //
    // if the url is a path we want to preserve the query params that are available on
    // the current url.
    this.preventHashAssignPopState = true;

    // [MODIFICATION: Added comment to disable line]
    //window.location.hash = hash;
    // [/MODIFICATION]

    // If popstate is enabled and the browser triggers `popstate` events when the hash
    // is set (this often happens immediately in browsers like Chrome), then the
    // this flag will be set to false already. If it's a browser that does not trigger
    // a `popstate` on hash assignement or `replaceState` then we need avoid the branch
    // that swallows the event created by the popstate generated by the hash assignment
    // At the time of this writing this happens with Opera 12 and some version of IE
    this.preventHashAssignPopState = false;

    state = $.extend({
        url: href,
        hash: hash,
        title: document.title
    }, data);

    if( isPopStateEvent ) {
        popstateEvent = new $.Event( "popstate" );
        popstateEvent.originalEvent = {
            type: "popstate",
            state: null
        };

        this.squash( url, state );

        // Trigger a new faux popstate event to replace the one that we
        // caught that was triggered by the hash setting above.
        if( !noEvents ) {
            this.ignorePopState = true;
            $.mobile.window.trigger( popstateEvent );
        }
    }

    // record the history entry so that the information can be included
    // in hashchange event driven navigate events in a similar fashion to
    // the state that's provided by popstate
    this.history.add( state.url, state );
};
</script>
<!-- script para controlar el reproductor -->
<script>
$('#btnTwitter').click(function(){ clickTwitter(); return false; });
function clickTwitter(){
	this.href  = '#page3';
	var i=1;
	 $.ajax({
		 type: "GET",
		 url: "http://extra.azurewebsites.net/twitterelcolombiano.xml",
		 dataType: "xml",
		 success: function(xml) {
		 $(xml).find('status').each(function(){
		 	var title = $(this).find("mensaje").text();
			var description = $(this).find('publicador').text();
			var imageurl = $(this).find('imagen').text();
			
			var html = '<div style="width:100%; margin-right:60px;"><p>' + title + '<br><font color="#FECC0A">@' + description + '</font></p></div>';
			html += '<p></p>' ;
 
			$('#twitter').append($(html));
		 });
		 },
		 error: function() {
			alert("Data not found");
		}
	 });
}
</script>
<!-- script para controlar el reproductor -->
<script>
	$(document).ready(function(){
		$("#play-bt").click(function(){
			$("#repro")[0].src="http://199.217.118.10:9774/;stream.mp3";
			$("#audiosource").load();
			$("#repro")[0].play({ playAudioWhenScreenIsLocked : true });
			$("#message").text("Cargando...");
			$("#repro")[0].addEventListener('error', function(e) {
			   // audio playback failed - show a message saying why
			   // to get the source of the audio element use $(this).src
				$("#message").text("No disponible");
			 });
			 $("#repro")[0].addEventListener('canplay', function(e) {
			   // audio playback failed - show a message saying why
			   // to get the source of the audio element use $(this).src
				$("#message").text("Reproduciendo");
			 });
			$("#play-bt")
		})
 
		$("#pause-bt").click(function(){
			$("#repro")[0].pause();
			$("#message").text("Detenido");
		})
	})
	//
	$.ajax({
		url:"http://www.example.com/xml",
		dataType: 'xml',
		success: function (data) {
			buildPage(data);
			$.mobile.hidePageLoadingMsg();
		},
		error: function (error){
			$.mobile.hidePageLoadingMsg();
			$("#results").html("Sorry, but there was some error sending your request..");
		}
	});
</script>
<!-- script para cargar datos de los progrmas de XML-->
<script type="text/javascript">
        	$(document).ready(function()
			  {
				var htmld = '';
				var htmll = '';
				var htmlm = '';
				var htmlw = '';
				var htmlj = '';
				var htmlv = '';
				var htmls = '';
				$.get('programas.xml', function(d){
				$(d).find('programa').each(function(){
		 
					var $programa = $(this); 
					var dia = $programa.find("dia").text();
					var title = $programa.find("nombre").text();
					var horario = $programa.find('horario').text();
		 			switch (dia)
					{
						case "domingo":
						htmld += '<li><b>' + title + '</b>';
						htmld += '<br>' + horario + '' ;
						htmld += '<hr></li>';
						break;
						case "lunes":
						htmll += '<li><b>' + title + '</b>';
						htmll += '<br>' + horario + '' ;
						htmll += '<hr></li>';
						break;
						case "martes":
						htmlm += '<li><b>' + title + '</b>';
						htmlm += '<br>' + horario + '' ;
						htmlm += '<hr></li>';
						break;
						case "miercoles":
						htmlw += '<li><b>' + title + '</b>';
						htmlw += '<br>' + horario + '' ;
						htmlw += '<hr></li>';
						break;
						case "jueves":
						htmlj += '<li><b>' + title + '</b>';
						htmlj += '<br>' + horario + '' ;
						htmlj += '<hr></li>';
						break;
						case "viernes":
						htmlv += '<li><b>' + title + '</b>';
						htmlv += '<br>' + horario + '' ;
						htmlv += '<hr></li>';
						break;
						case "sabado":
						htmls += '<li><b>' + title + '</b>';
						htmls += '<br>' + horario + '' ;
						htmls += '<hr></li>';
						break;
					}
					
				});
				$('#domingol').append($(htmld));
				$('#lunesl').append($(htmll));
				$('#martesl').append($(htmlm));
				$('#miercolesl').append($(htmlw));
				$('#juevesl').append($(htmlj));
				$('#viernesl').append($(htmlv));
				$('#sabadol').append($(htmls));
			});
		});
</script>
<style type="text/css">
html, body
{
   
}
.contentmod {
	width:100%;
	text-align:left;
}
.logogrande {
	margin-top:0px;
	margin-bottom:0px;
	display: block;
	width:100%;
	height:100%;
	max-height:300px;
	max-width:300px;
	display: inline-block;
         /* IE 7- hacks */
         zoom: 1;
         *display: inline;
}
.imageLogo
{
	display: block;
    margin-left: auto;
    margin-right: auto;
	width: 100%;
	max-width:332px;
	max-height:130px;
}
.imageLogoRepro
{
	width: 100%;
	height: 100%; 
	max-width: 300px;
	max-height:300px;
}
.imageIconos
{
	width: 100%; 
	max-width: 95px;
	max-height:95px;
}
</style>
</head> 
<body>
<div data-role="page" id="page1" class="ui-body-b">
	
    <!--Contenido -->
	<div style="width:100%; 
    bottom:0;">
    <div data-role="header" style=" background-color:#00162D" >
		<img alt="Logo Esperanza" class="imageLogo" src="images/upLogo.png">
        <hr color="#F8CE09" size="4">
	</div>
        <!-- Imagen de emisora -->
        <center><div style="margin-left:auto;
 margin-right:auto; margin-top:15px; width:auto"><img alt="Logo Reproductor" class="imageLogoRepro" src="images/logo.png" />
            <!-- Controles de reproducción -->
            <div style="text-align:right; width:auto; max-width:300px; margin-left:0px; margin-right:0px; height:35px;  margin-top:-48px;">
              <a id="play-bt" href="#"><img alt="Play" src="images/play.png" style="margin-right:-20px" width="48" height="48"></a> &nbsp;&nbsp; <a id="pause-bt" href="#"><img alt="Pause" src="images/pause.png" width="48" height="48"></a>
            <div id="message" style="text-align:left; width:100%; margin-left:5px; margin-right:0px; height:35px; margin-top:-37px;">Detenido</div>
            </div>
            <div style="margin-left:auto;
 margin-right:auto; margin-top:30px; width:auto"><hr color="#F8CE09" size="4">
                	<a href="https://www.facebook.com/pages/Esperanza-Colombia-Radio/843814732302358?ref=hl" data-transition="slide"><img src="images/fbLogo.png" class="imageIconos" width="auto" height="auto" alt="fb-logo"></a>
                    <a href="https://twitter.com/ecradio1" data-transition="slide"><img src="images/twLogo.png" width="auto" height="auto" alt="tw-logo"></a>
                    <a href="#page3" data-transition="slide"><img src="images/infoLogo.png" width="auto" height="auto" alt="info-logo"></a>
            </div>
            <!-- Fin Controles de reproducción -->
        </div><!-- FIn Imagen de emisora -->
        <audio id="repro">
           <source id="audiosource" src="#" type="audio/mpeg">
           Your browser does not support the audio tag.
        </audio>
        </center>
        <div data-role="footer" data-position="fixed" >
		<div data-role="navbar" >
            <ul>
                <li><a class="ui-btn-active ui-state-persist" href="#page1">EN VIVO</a></li>
                <li><a href="#page2" data-transition="slide">PROGRAMAS</a></li>
                <li><a id="btnTwitter" title="clicTwitter" href="http://www.esperanzacolombia.org.co/" data-transition="slide">ESPERANZA</a></li>
            </ul>
        </div><!-- /navbar -->
	</div>
	</div>
    <!--Fin contenido -->
	
</div>
<div data-role="page" id="page2" class="ui-body-b">
	<div data-role="header" style="background-color:#00162D"" data-position="fixed">
    	<img alt="Logo Esperanza" class="imageLogo" src="images/upLogo.png">
        <hr color="#F8CE09" size="4">
	</div>
	<div data-role="content">	
		<div id="catalogue" style="margin-right:30px;">
        </div>
        <div data-role="collapsibleset" style="width:auto" data-inset="false">
            <div data-role="collapsible">
                <h3>Domingo</h3>
                <ul id="domingol" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Lunes</h3>
                <ul id="lunesl" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Martes</h3>
                <ul id="martesl" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Miércoles</h3>
                <ul id="miercolesl" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Jueves</h3>
                <ul id="juevesl" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Viernes</h3>
                <ul id="viernesl" data-role="listview" data-inset="false">
                </ul>
            </div>
            <div data-role="collapsible">
                <h3>Sábado</h3>
                <ul id="sabadol" data-role="listview" data-inset="false">
                </ul>
            </div>
        </div>

	</div>
	<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
            <ul>
                <li><a href="#page1" data-transition="slide" data-direction="reverse">EN VIVO</a></li>
                <li><a class="ui-btn-active ui-state-persist" href="#page2">PROGRAMAS</a></li>
                <li><a id="btnTwitter" title="clicTwitter" href="http://www.esperanzacolombia.org.co/" data-transition="slide">ESPERANZA</a></li>
            </ul>
        </div><!-- /navbar -->
	</div>
</div>
<div data-role="page" id="page3" class="ui-body-b">
	<div data-role="header" style="background-color:#00162D" data-position="fixed">
    	<img alt="Logo Esperanza" class="imageLogo" src="images/upLogo.png">
        <hr color="#F8CE09" size="4">
	</div>
	<div data-role="content" class="contentmod">	
		<center><div id="info" style="margin-left:auto;
 margin-right:30px; margin-top:15px; width:auto; text-align:left;	">
        <b>Acerca de</b><br>Esperanza Colombia Radio (EC-Radio) Es la aplicación que te permitirá escuchar en vivo la programación de la emisora desde tu dispositivo móvil; además contará con la programación para que estés enterado de tus programas favoritos. Esperamos disfrutes esta aplicación y sea de gran beneficio para ti.<br><br>
        <b> Políticas de Privacidad</b>
        <br>
        La aplicación EC-Radio hace uso de tu conexión a internet esto podría incurrir en costos con tu operador de red móvil e incrementar el consumo de la batería de tu dispositivo.<br> Ten en cuenta que nuestra aplicación no recoge ninguna información de nuestros usuarios.
        </div></center>
	</div>
	<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
            <ul>
                <li><a href="#page1" data-transition="slide" data-direction="reverse">EN VIVO</a></li>
                <li><a href="#page2" data-transition="slide" data-direction="reverse">PROGRAMAS</a></li>
                <li><a id="btnTwitter" title="clicTwitter" href="http://www.esperanzacolombia.org.co/" data-transition="slide">ESPERANZA</a></li>
            </ul>
        </div><!-- /navbar -->
	</div>
</div>
</body>
</html>
